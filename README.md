Mortgage Expert Bot — это Telegram-бот, который помогает пользователям рассчитать различные параметры ипотеки и моделировать досрочное погашение. Бот реализован на Java с использованием Spring и паттерна State для пошагового диалога.

Основной функционал
Базовый калькулятор

Ввод основной суммы кредита (тело долга)
Ввод процентной ставки
Ввод ежемесячного платежа
Расчёт срока погашения (в месяцах) при указанных параметрах
Режим досрочного погашения

Выбор типа досрочного погашения: сокращение срока кредита или уменьшение процентов (пока в основном реализована логика сокращения срока)
Ввод дополнительной суммы, которая будет вноситься ежемесячно
Перерасчёт нового срока кредита с учётом дополнительного платежа
Команды Telegram

/help — выводит справку со списком доступных команд
/calc — запускает пошаговый ввод данных для ипотеки

Технические детали:
Spring Boot: используется для конфигурации и структуры приложения.
TelegramLongPollingBot: реализует long-polling для приёма сообщений от пользователей.
Паттерн State: каждый этап диалога с пользователем (ввод суммы, ставки, доп. платежа и т.д.) оформлен в виде отдельного состояния.
ConcurrentHashMap для хранения сессий: бот запоминает состояние по chatId, чтобы пользователь мог продолжить диалог с того места, где остановился.

Как это работает (кратко):
Пользователь вводит /calc, бот переходит в начальное состояние (ввод тела долга).
Бот пошагово запрашивает данные: сумма кредита, процент, ежемесячный платёж.
Пользователь выбирает, хочет ли он добавлять дополнительную сумму ежемесячно (для досрочного погашения) и в каком режиме (сокращение срока или уменьшение процентов).
По итогам ввода бот считает, сколько месяцев (или лет) нужно, чтобы полностью погасить кредит, и показывает разницу между обычным сценарием и сценарием с досрочным погашением.

Что уже реализовано:
Пошаговый сбор данных с помощью паттерна State (классы-состояния).
Логика калькулятора ипотечных платежей:
Расчёт срока ипотеки по классической формуле аннуитета.
Расчёт нового срока при внесении фиксированного дополнительного платежа ежемесячно.
Простая обработка команд Telegram (/help, /calc) и вывод справочной информации.
Сохранение состояний пользователя в ConcurrentHashMap (ключ — chatId).

Потенциальные улучшения:
Добавить детализированный расчёт процентов (общая переплата, экономия).
Поддержка разных типов досрочного погашения (разовые платежи, переменная сумма и т.д.).
Улучшение интерфейса бота (inline-кнопки, меню, подсказки при неправильном вводе).
Логирование ошибок и некорректного ввода с отправкой понятного сообщения пользователю.
